<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="output.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Day 2 Week 3</title>
    <style>
       @import url('https://fonts.googleapis.com/css2?family=Space+Mono&display=swap');
      body{
        font-family: 'Space Mono', monospace;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .bg-white{
        background: white;
      }
      .bg-bluish{
        background: #f6f8ff;
      }
      .box-shad{
        box-shadow: 0px 16px 30px -10px rgba(70, 96, 187, 0.198567);
      }
      .bg-dark{
        background: #141D2F !important;
      }
      .bg-light{
        background: #1E2A47 !important;
      }
      .clr-gray{
        color: #dde2f4 !important;
      }
      .clr-white{
        color: white;
      }
      .clr-red{
        color: red;
      }
      .bg-blue-600{
        background: rgb(38, 38, 247);
      }
      @keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
.spin{
  animation: spin 1s linear infinite;
}
    </style>
</head>
<body class="font bg-bluish">
  <div class="container p-4 h-screen md:pt-14">
     <div class="w-[100%] md:w-[80%] lg:w-[70%] xl:w-[60%] 2xl:w-[50%] mx-auto flex flex-col gap-5 md:gap-7">
      <!-- nav -->
      <nav class="flex justify-between items-center">
        <h1 class="font-black text-xl">devfinder</h1>
        <div class="">
          <span class="flex justify-center items-center gap-2 cursor-pointer  hover:opacity-50" onclick="toggleDayNightMode()">
            <span id="text"></span><img id="sun" class="hidden" src="./assets/icon-sun.svg" alt="moon">
            <img id="moon" src="./assets/icon-moon.svg" alt="sun">
          </span>
        </div>
      </nav>
      <!-- navbar ends -->
      <!-- search bar -->
      <div class="relative rounded-lg py-2 bg-white box-shad" id="input-wrapper">
        <input class="py-2 text-sm md:text-xl outline-none block h-full w-full sm:pl-14 pl-10 bg-white" type="text" onkeyup="inputChangeHandler()" placeholder="Search Github username..." id="input">
        <span class="absolute sm:left-3 left-2 top-[50%] translate-y-[-50%] text-2xl"  alt="search bar"><i class="fa-solid fa-magnifying-glass" id="srch-icon" style="color: #1868f2;"></i></span>  
        <button class="absolute sm:right-3 right-2 top-[50%] translate-y-[-50%] md:px-4 px-2 py-2 md:py-3 bg-blue-600 hover:opacity-80 rounded-lg text-white font-medium " onclick="searchGithubUserHandler()" id="srch-btn">Search</button>
      </div>
      <!--search  bar ends  here -->
      <!-- main mcard starts here -->
      <div id="card" class="bg-white box-shad rounded-lg py-4 md:py-5 md:h-max">
        
        <!-- card's first section -->
        <section class="flex justify-between items-stretch flex-col md:flex-row gap-5 md:gap-1">
          <!-- one -->
          <div class="flex justify-center md:items-start items-center md:w-[30%] w-full md:p-5">
              <div class="h-[117px] w-[117px] overflow-hidden rounded-full">
                <img class="block h-full w-full" src="https://avatars.githubusercontent.com/u/583231?v=4" alt="company">
              </div>
          </div>
          <!-- two -->
          <div class="md:w-[70%] w-full flex md:justify-between justify-center md:items-stretch flex-col md:p-5 p-2">
            <div class="w-[100%] flex justify-between items-stretch flex-col md:flex-row">
               <!-- one -->
                <div class="flex md:justify-start justify-center items-start gap-10  md:w-[50%] w-full md:py-3">
                  <div class="flex flex-col justify-center md:justify-start">
                    <div class="pb-3">
                      <div class="font-black text-base">Full Name</div>
                      <div class="font-medium text-blue-600">@username</div>
                    </div>
                    <div class="text-gray-500">status...</div>
                  </div>
                </div>
                <!-- two -->
                <div class="py-4 md:py-1 md:w-[50%] w-full flex justify-center items-center text-gray-500 text-right">
                  Joined 25 january 2023
                </div>
            </div>
            <!-- blue card starts -->
            <div class="bg-bluish flex justify-between items-center p-3 rounded-lg md:my-6">
              <div class="repos">
                <h2 class="text-center md:text-left text-gray-500 py-2">Repos</h2>
                <p class="text-center md:text-left font-bold md:text-xl">00</p>
              </div>
              <div class="repos">
                <h2 class="text-center md:text-left text-gray-500 py-2">Followers</h2>
                <p class="text-center md:text-left font-bold md:text-xl">00</p>
              </div>
              <div class="repos">
                <h2 class="text-center md:text-left text-gray-500 py-2">Following</h2>
                <p class="text-center md:text-left font-bold md:text-xl">00</p>
              </div>
            </div>
            <!-- blue card ends -->
            <div class="flex justify-between flex-col md:flex-row py-3 md:my-6">
              <div class="md:w-[50%] w-full flex flex-col md:gap-5 gap-1">
                <div class="flex justify-start md:gap-3 gap-1 cursor-pointer hover:text-blue-600 my-3 md:my-1 max-w-fit">
                  <span class="w-[40px]">
                    <img class="block" src="./assets/icon-location.svg" alt="">
                  </span>
                  <span class="">Location</span>
                </div>
                <div class="flex justify-start md:gap-3 gap-1 cursor-pointer hover:text-blue-600 my-3 md:my-1 max-w-fit">
                  <span class="w-[40px]">
                    <img class="block" src="./assets/icon-website.svg" alt="">
                  </span>
                  <span>Github.url</span>
                </div>
              </div>
              <div class="md:w-[50%] flex flex-col md:gap-5 gap-1 ">
                <div class="flex justify-start md:gap-3 gap-1 cursor-pointer hover:text-blue-600 my-3 md:my-1 max-w-fit">
                  <span class="w-[40px]">
                    <img class="block" src="./assets/icon-twitter.svg" alt="">
                  </span>
                  <span>Twitter</span>
                </div>
                <div class="flex justify-start md:gap-3 gap-1 cursor-pointer hover:text-blue-600 my-3 md:my-1 max-w-fit">
                  <span class="w-[40px]">
                    <img class="block" src="./assets/icon-company.svg" alt="">
                  </span>
                  <span>@org</span>
                </div>
              </div>
            </div>
          </div>
          </section>
      </div>
     </div>   
    </div>
    <!-- script -->
    <script>
    //  elements references
      const elements = {
  srchIcon: document.getElementById("srch-icon"),
  button: document.getElementById("srch-btn"),
  input: document.getElementById("input"),
  inputWrapper: document.getElementById("input-wrapper"),
  loader: document.getElementById("loader"),
  text: document.getElementById("text"),
  moon: document.getElementById("moon"),
  sun: document.getElementById("sun"),
  blueish: document.getElementById("bluish"),
  card: document.getElementById("card"),
};
elements.text.innerHTML = "DARK";
      let night = false;
      // toggle day and night mode
      function toggleDayNightMode() {
  const bluishElements = document.querySelectorAll(".bg-bluish");
  const lightBluishElements = document.querySelectorAll(".bg-white");
  const grayTextElements = document.querySelectorAll(".text-gray-500");

  night = !night;

  elements.text.innerHTML = night ? "LIGHT" : "DARK";
  elements.moon.classList.toggle("hidden");
  elements.sun.classList.toggle("hidden");

  bluishElements.forEach(el => {
    el.classList.toggle("bg-dark");
    el.classList.toggle("clr-white");
  });

  lightBluishElements.forEach(el => {
    el.classList.toggle("bg-light");
  });

  grayTextElements.forEach(el => {
    el.classList.toggle("clr-gray");
  });
  elements.blueish.classList.toggle("bg-dark", night);
}
      // function to set api error
      function setErrorHandler() {
    
  elements.card.innerHTML = `
    <section>
      <div class="text-center text-6xl">
        <i class="fa-solid fa-face-frown" style="color: rgb(38, 38, 247)"></i>
      </div>
      <h3 class="font-black text-4xl text-center py-5">Error Occured!</h3>
      <p class="text-center">Please enter a valid username...</p>
    </section>`;
    return elements.button.disabled = false;
}
      // function to set loading state
      function setloaderHandler(){
        elements.button.disabled = true;
        elements.button.style.background = "gray";
        elements.card.innerHTML = `
    <div class="text-5xl text-center py-10" id="loader">
      <i class="fa-solid fa-circle-notch spin"></i>
    </div>`;
      }
      // function to set response data
      function setResponseHandler(resp){
        elements.card.innerHTML  = `
        <section class="flex justify-between items-stretch flex-col md:flex-row gap-5 md:gap-1">
          <div class="flex justify-center md:items-start items-center md:w-[30%] w-full md:p-5">
              <div class="h-[117px] w-[117px] overflow-hidden rounded-full">
                <img class="block h-full w-full" src="${resp.avatar_url}" alt="company">
              </div>
          </div>
          <div class="md:w-[70%] w-full flex md:justify-between justify-center md:items-stretch flex-col md:p-5 p-2">
            <div class="w-[100%] flex justify-between items-stretch flex-col md:flex-row">
                <div class="flex md:justify-start justify-center items-start gap-10  md:w-[50%] w-full md:py-3">
                  <div class="flex flex-col justify-center md:justify-start">
                    <div class="pb-3">
                      <div class="font-black text-base md:text-start text-center">${resp.name}</div>
                      <div class="font-medium text-blue-600 md:text-start text-center">@${resp.login}</div>
                    </div>
                    <div class="text-gray-500 line-clamp-2">${resp.bio === null ? "Not mentioned" : resp.bio}</div>
                  </div>
                </div>
                <div class="py-4 md:py-1 md:w-[50%] w-full flex justify-center items-center text-gray-500 text-right">
                  Joined 25 january 2023
                </div>
            </div>
            <div class="bg-bluish flex justify-between items-center p-3 rounded-lg md:my-6" id="bluish">
              <div>
                <h2 class="text-center md:text-left text-gray-500 py-2">Repos</h2>
                <p class="text-center md:text-left font-bold md:text-xl">${resp.public_repos < 10 ? '0'+resp.public_repos :  resp.public_repos}</p>
              </div>
              <div>
                <h2 class="text-center md:text-left text-gray-500 py-2">Followers</h2>
                <p class="text-center md:text-left font-bold md:text-xl">${resp.followers < 10 ? '0'+resp.followers :  resp.followers}</p>
              </div>
              <div>
                <h2 class="text-center md:text-left text-gray-500 py-2">Following</h2>
                <p class="text-center md:text-left font-bold md:text-xl">${resp.following < 10 ? '0'+resp.following :  resp.following}</p>
              </div>
            </div>
            <div class="flex justify-between flex-col md:flex-row p-3 md:my-6">
              <div class="md:w-[50%] w-full flex flex-col md:gap-5 ">
                <div class="flex justify-start md:gap-3 gap-1 ${resp.location === null ? 'cursor-not-allowed pointer-events-none' : 'cursor-pointer'} hover:text-blue-600 my-3 md:my-1">
                  <span class="sm:w-[10%] w-[5%]">
                    <img class="block" src="./assets/icon-location.svg" alt="">
                  </span>
                  <a target="_black" class="w-[70%] truncate ${resp.location === null ? "pointer-events-none cursor-not-allowed" : "cursor-pointer"} truncate" href="https://www.google.com/maps?q=${resp.location}">${resp.location}</a>
                </div>
                <div class="flex justify-start md:gap-3 gap-1 ${resp.html_url === null ? 'cursor-not-allowed pointer-events-none' : 'cursor-pointer'} hover:text-blue-600 my-3 md:my-1">
                  <span class="sm:w-[10%] w-[5%]">
                    <img class="block" src="./assets/icon-website.svg" alt="">
                    </span>
                  <a target="_blank" class="w-[70%] truncate" href="${resp.html_url}">${resp.html_url}</a>
                </div>
              </div>
              <div class="md:w-[50%] flex flex-col md:gap-5 gap-1 ">
                <div class="flex justify-start md:gap-3 gap-1 ${resp.twitter_username === null ? 'cursor-not-allowed pointer-events-none' : 'cursor-pointer'} hover:text-blue-600 my-3 md:my-1">
                  <span class="sm:w-[10%] w-[5%]"><img class="block" src="./assets/icon-twitter.svg" alt=""></span>
                  <a target="_blank" class="w-[70%] truncate ${resp.twitter_username === null ? 'cursor-not-allowed pointer-events-none' : 'cursor-pointer'}" href="${resp.twitter_username}">${resp.twitter_username === null ? "none" : resp.twitter_username}</a>
                </div>
                <div class="flex justify-start md:gap-3 gap-1 my-3 md:my-1">
                  <span class="sm:w-[10%] w-[5%]"><img class="block" src="./assets/icon-company.svg" alt="website"></span>
                  <a target="_blank" class="block w-[70%] truncate ${resp.organizations_url === null ? 'cursor-not-allowed pointer-events-none' : 'cursor-pointer'}" href="${resp.organizations_url}">${resp.organizations_url === null ? "None" : resp.organizations_url}</a>
                </div>
              </div>
            </div>
          </div>
          </section>
        `;
        elements.button.disabled = false;
        elements.button.style.background = "blue";
        if(night){
          return document.getElementById("bluish").classList.add("bg-dark");
        }else{
          return document.getElementById("bluish").classList.remove("bg-dark");
        }
        }
        // elements.button.disabled = "true";
        // api callback
        function fetchGithubUserData(value) {
  fetch(`https://api.github.com/users/${value}`)
    .then(response => {
      if (!response.ok) {
        setloaderHandler();
        setErrorHandler();
        throw new Error("Error occurred!");
      }
      return response.json();
    })
    .then(data => {
      setloaderHandler();
      console.log(data)
      setTimeout(() => {
        setResponseHandler(data);
      }, 1000);
    })
    .catch(() => {
      setErrorHandler();
    });
}
function searchGithubUserHandler() {
  elements.input.focus();
  const value = elements.input.value;
  if (value === "") {
    elements.inputWrapper.style.outline = "1px solid red";
    elements.srchIcon.style.color = "red";
    elements.button.style.background = "red";
    elements.input.placeholder = "Can not be empty...";
    return;
  }
  fetchGithubUserData(value);
}
      // error state remover
      function errorStateRemover(){
        elements.inputWrapper.style.outline = "none";
  elements.srchIcon.style.color = "blue";
  elements.button.style.background = "blue";
  elements.input.placeholder = "Search github username...";
      }
      // on change input
      function inputChangeHandler(){
        errorStateRemover();
      }
      // on blur input
      input.addEventListener("blur", ()=> {
        console.log("blur")
        errorStateRemover();
      });
    </script>
</body>
</html>
